import{w as h}from"./with-props-Ec_yEytb.js";import{q as x,r as P,l as e,t as j}from"./chunk-GNGMS2XR-CoPZddH2.js";import{u as b,M as y,F as t,s as C,z as r}from"./form-input-B0vj2nYP.js";import{a as N}from"./db-CDBC-hjf.js";import{B as S}from"./button-Bqb_cXL3.js";const v=r.object({name:r.string().min(1,"Name is required"),email:r.string().email("Please enter a valid email address").min(1,"Email is required"),password:r.string().min(8,"Password must be at least 8 characters").max(50,"Password is too long").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),confirmPassword:r.string()}).refine(a=>a.password===a.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function E(){var c,d,u,p;const a=x(),[i,m]=P.useState(!1),{register:o,handleSubmit:w,formState:{errors:s},setError:l}=b({resolver:C(v),mode:"onBlur"}),f=async n=>{try{m(!0),await N(n.email,n.password,n.name),a("/sign-in")}catch(g){g instanceof Error?l("root",{message:g.message}):l("root",{message:"An error occurred while creating your account"})}finally{m(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"sign-up-header",children:[e.jsx("h1",{className:"title",children:"Create an account"}),e.jsxs("p",{className:"sign-up-subtitle",children:["Already have an account?"," ",e.jsx(j,{to:"/sign-in",className:"login-link",children:"Sign in"})]})]}),e.jsxs("form",{className:"sign-up-form",onSubmit:w(f),noValidate:!0,children:[s.root&&e.jsx(y,{variant:"error",children:s.root.message}),e.jsx(t,{label:"Name",type:"text",id:"name",error:(c=s.name)==null?void 0:c.message,autoComplete:"name",...o("name")}),e.jsx(t,{label:"Email",type:"email",id:"email",error:(d=s.email)==null?void 0:d.message,autoComplete:"email",...o("email")}),e.jsx("div",{className:"form-group",children:e.jsx(t,{label:"Password",type:"password",id:"password",error:(u=s.password)==null?void 0:u.message,autoComplete:"new-password",showPassword:!0,...o("password")})}),e.jsx(t,{label:"Confirm password",type:"password",id:"confirmPassword",error:(p=s.confirmPassword)==null?void 0:p.message,autoComplete:"new-password",showPassword:!0,...o("confirmPassword")}),e.jsx(S,{type:"submit",variant:"primary",disabled:i,fullWidth:!0,children:i?"Creating account...":"Create account"})]})]})}function B({}){return[{title:"Create your account"},{name:"description",content:"Create a new account"}]}const L=h(function(){return e.jsx(E,{})});export{L as default,B as meta};
